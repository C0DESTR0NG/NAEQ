<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
        <script src="/js/jquery.min.js"></script>
    </head>
    <body>
        
        <script>

            let _ = ['âˆ´','a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z'];
            
            $(document).ready( function() {

                let cipherIndex = 0;

                // Loop 26 times to match English alphabet length
                for( let x=1; x<26; ++x ) {
                
                    let i = 1;
                    let key = x;
                    let counter = 1;
                    let duplicates = [];
                    let orderValues = [];
                    let arrayLength = _.length;

                    while(counter < arrayLength ) {
                        if( !(_[i].toString() in orderValues) ) {
                            orderValues[_[i].toString()] = counter;
                        }
                        else {
                            duplicates.push(_[i].toString())
                        }

                        i += key;

                        if( i >= arrayLength ) {
                            i = (i - arrayLength) % 26 + 1;
                        }

                        counter++;
                    }

                    // Check that Order/Value array length is 26
                    // Check that there are no duplicates found in loop
                    if( Object.keys(orderValues).length == 26 && duplicates.length == 0 ) {
                        cipherIndex++;
                        console.log( "CIPHER "+ cipherIndex +"  ("+ x +")" );
                        console.log( Object.keys(orderValues).map(function(x){return orderValues[x];}).join(',\t') );
                        console.log( Object.keys(orderValues).map(function(x){return x.toUpperCase();}).join(',\t') );
                        console.log( getCipherValueByKey( "INDRID COLD", orderValues) +", "+ getCipherValueByKey( "HELLIER", orderValues) );
                        console.log( getCipherValueByValue( "3600 2505 8190 6840", orderValues) );
                        console.log(" ");
                    }
                }

            });

            function getCipherValueByKey( text, orderValues ) {
                let str = text.toLowerCase();
                let cipherCounter = 0
                $.each(str.split(''), function( i, v ) {
                    if( v in orderValues ) {
                        cipherCounter += orderValues[v];
                    }
                });
                return text +" = "+ cipherCounter;
            }

            function getCipherValueByValue( text, orderValues ) {
                let num = text.replace(/\s/g,'');
                let cipherStr = "";
                $.each(num.split(''), function( i, v ) {
                    if( v > 0 ) {
                        cipherStr += getKeyByValue(orderValues, parseInt(v));
                    }
                    else {
                        cipherStr += " ";
                    }
                });
                cipherStr = cipherStr.replace(/\s/g,'')
                return num +" = "+ cipherStr +" "+ cipherStr.split("").reverse().join("");
            }

            function getKeyByValue(object, value) {
               return Object.keys(object).find(key => object[key] === value);
            }

        </script>
        
    </body>
</html>
